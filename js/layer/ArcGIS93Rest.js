SuperMap.Layer.ArcGIS93Rest=SuperMap.Class(SuperMap.CanvasLayer,{DEFAULT_PARAMS:{format:"png"},isBaseLayer:true,attribution:"Data by <a style='white-space: nowrap' target='_blank' href='http://www.arcgisonline.cn/'>ArcGIS</a>",initialize:function(d,c,f,b){var e=this,a=[];f=SuperMap.Util.upperCaseObject(f);a.push(d,c,f,b);SuperMap.CanvasLayer.prototype.initialize.apply(e,a);SuperMap.Util.applyDefaults(e.params,SuperMap.Util.upperCaseObject(e.DEFAULT_PARAMS));if(this.params.TRANSPARENT&&this.params.TRANSPARENT.toString().toLowerCase()=="true"){if((b==null)||(!b.isBaseLayer)){this.isBaseLayer=false}if(this.params.FORMAT=="jpg"){this.params.FORMAT=SuperMap.Util.alphaHack()?"gif":"png"}}},destroy:function(){SuperMap.CanvasLayer.prototype.destroy.apply(this,arguments)},clone:function(a){if(a==null){a=new SuperMap.Layer.ArcGIS93Rest(this.name,this.url,this.params,this.getOptions())}a=SuperMap.CanvasLayer.prototype.clone.apply(this,[a]);return a},getURL:function(e){e=this.adjustBounds(e);var d=this.projection.getCode().split(":");var c=d[d.length-1];var g=this.getImageSize();var h={BBOX:e.toBBOX(),SIZE:g.w+","+g.h,F:"image",BBOXSR:c,IMAGESR:c};if(this.layerDefs){var f=[];var a;for(a in this.layerDefs){if(this.layerDefs.hasOwnProperty(a)){if(this.layerDefs[a]){f.push(a);f.push(":");f.push(this.layerDefs[a]);f.push(";")}}}if(f.length>0){h.LAYERDEFS=f.join("")}}var b=this.getFullRequestString(h);return b},setLayerFilter:function(b,a){if(!this.layerDefs){this.layerDefs={}}if(a){this.layerDefs[b]=a}else{delete this.layerDefs[b]}},clearLayerFilter:function(a){if(a){delete this.layerDefs[a]}else{delete this.layerDefs}},mergeNewParams:function(c){var b=SuperMap.Util.upperCaseObject(c);var a=[b];return SuperMap.CanvasLayer.prototype.mergeNewParams.apply(this,a)},CLASS_NAME:"SuperMap.Layer.ArcGIS93Rest"});